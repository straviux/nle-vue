import{m as B,p as Z,q,d as E,e as y,s as L,l as M,o as i,c as n,a as e,w as g,x as N,u as d,F as b,g as f,t as p,f as x,v as k,n as T,i as Q,r as Y,b as A,h as X,k as z,j as J,y as ee,L as te}from"./index-3bd85afc.js";import{h as se}from"./moment-fbc5633a.js";B.create({paramsSerializer:{serialize:Z.stringify}});const U=q("bskResult",{state:()=>({bskResult:[],formDistrict:null,formMunicipality:[],formBarangay:[],formPosition:[],limited_access:!1,loading:!1,resultErrors:[]}),getters:{has_limited_access:l=>l.limited_access,is_loading:l=>l.loading,result:l=>l.bskResult,district:l=>l.formDistrict,municipality:l=>l.formMunicipality,position:l=>l.formPosition,barangay:l=>l.formBarangay,errors:l=>l.resultErrors},actions:{async getResult(){const l=await B.get("/api/v1/bskresult");this.bskResult=l.data},async getBarangay(l){if(l)try{const s=await B.get("/api/v1/bsk-barangay-by-municipality",{params:{municipality:l}});this.formBarangay=s.data}catch{}},async generateResult(l){if(l)try{this.resultErrors=[],this.loading=!0;const s=await B.get("/api/v1/bskresult",{params:{municipality:l.municipalities,position:l.positions,barangay:l.barangays,report_level:l.report_level,district:l.district}});if(l.report_level=="municipality"){let m;for(let t=0;t<l.municipalities.length;t++)m+=`municipalities[]=${l.municipalities[t]}&`}s.status===200&&(this.loading=!1),this.bskResult=s.data,this.formReportLevel=l.report_level,this.formDistrict=l.district,this.formMunicipality=l.municipalities,this.formPosition=l.positions,this.formBarangay=l.barangay,console.log(l.positions)}catch{this.loading=!1}}}}),ae={class:"relative"},le=e("p",{class:"mx-4 mt-4 px-1 text-[14px] font-semibold text-gray-600"}," Report level: ",-1),ie={class:"grid grid-cols-2 border rounded mx-4 my-2 px-1"},ne={class:"py-2"},oe={class:"flex p-2 cursor-pointer gap-1"},re=e("span",{class:"label-text uppercase text-xs"},"Municipality",-1),ce={class:"py-2"},de={class:"flex p-2 cursor-pointer gap-1"},ue=e("span",{class:"label-text uppercase text-xs"},"Barangay",-1),pe=e("div",{class:"divider"},null,-1),me={key:0,class:"flex border rounded m-4 px-1"},_e=e("div",{class:"py-3 my-auto px-2 w-[120px] border-gray-300 text-gray-600 text-xs font-semibold"}," District ",-1),xe={tabindex:"0",class:"flex p-2 gap-1 w-full max-h-[300px]"},ve={class:"flex p-2 cursor-pointer ml-3 gap-1"},ge=["value"],be={class:"label-text uppercase text-xs"},ye={key:1,class:"flex border rounded m-4 px-1"},he=e("div",{class:"py-3 my-auto px-2 border-r-2 w-[120px] border-gray-300 text-gray-600 text-xs font-semibold"}," Municipality ",-1),fe={key:0,class:"mx-auto btn bg-transparent btn-sm btn-block text-gray-800 m-1 hover:bg-transparent border-0 text-[10px]"},we={key:1,class:"w-full dropdown dropdown-bottom"},ke={tabindex:"0",class:"dropdown-content p-1 shadow bg-base-100 rounded-box w-full absolute z-[1000] min-w-max list-none overflow-y-auto h-[350px]"},Ae={key:0},Ce={class:"cursor-pointer w-full whitespace-nowrap bg-transparent items-center flex py-2 gap-2 px-2 hover:bg-gray-100 rounded-lg"},Re=e("span",{class:"label-text text-xs"},"ALL",-1),$e={class:"cursor-pointer w-full whitespace-nowrap bg-transparent items-center flex py-2 gap-2 px-2 hover:bg-gray-100 rounded-lg"},Ne=["id","value"],Be=["id","value"],Pe={class:"label-text text-xs"},Oe={key:2,class:"px-4 flex items-center justify-center"},Le={key:0,class:"grid gap-1 grid-cols-3"},Ee=["onClick"],Me={class:"uppercase text-[10px]"},Ue={key:3,class:"flex border rounded m-4 px-1"},Se=e("div",{class:"py-3 my-auto px-2 border-r-2 w-[120px] border-gray-300 text-gray-600 text-xs font-semibold"}," Barangay ",-1),Ve={class:"w-full dropdown dropdown-bottom"},Ie={tabindex:"0",class:"dropdown-content p-1 shadow bg-base-100 rounded-box w-full absolute z-[1000] min-w-max list-none overflow-y-auto h-[350px]"},Ge={class:"cursor-pointer w-full whitespace-nowrap bg-transparent items-center flex py-2 gap-2 px-2 hover:bg-gray-100 rounded-lg"},Te=e("span",{class:"label-text text-xs"},"ALL",-1),Ye={class:"cursor-pointer w-full whitespace-nowrap bg-transparent items-center flex py-2 gap-2 px-2 hover:bg-gray-100 rounded-lg"},ze=["id","value"],Fe={class:"label-text text-xs"},je={class:"px-4 flex items-center justify-center"},Ke={class:"grid gap-1 grid-cols-3"},We=["onClick"],De={class:"uppercase text-[10px]"},He={class:"flex border rounded m-4 px-1"},Ze=e("div",{class:"py-3 my-auto px-2 border-r-2 w-[120px] border-gray-300 text-gray-600 text-xs font-semibold"}," Position ",-1),qe={class:"w-full dropdown dropdown-bottom"},Qe={tabindex:"0",class:"dropdown-content p-1 shadow bg-base-100 rounded-box w-full absolute z-[400] min-w-max list-none overflow-y-auto h-[250px]"},Xe={class:"cursor-pointer w-full whitespace-nowrap bg-transparent items-center flex py-2 gap-2 px-2 hover:bg-gray-100 rounded-lg"},Je=e("span",{class:"label-text text-xs"},"ALL",-1),et={class:"cursor-pointer w-full whitespace-nowrap bg-transparent items-center flex py-2 gap-2 px-2 hover:bg-gray-100 rounded-lg"},tt=["id","value"],st={class:"label-text text-xs"},at={class:"px-4 flex items-center justify-center"},lt={class:"grid gap-1 grid-cols-3"},it=["onClick"],nt={class:"text-[10px]"},ot={class:"flex py-6"},rt={__name:"FilterForm",setup(l){const s=E(),m=U(),t=y({district:1,municipalities:[],barangays:[],positions:[],report_level:"municipality"}),_=y(!1),h=y(!1),c=y(!0),u=[{id:1,name:"1st",municipalities:["AGUTAYA","ARACELI","BUSUANGA","CAGAYANCILLO","CORON","CULION","CUYO","DUMARAN","EL NIDO","KALAYAAN","LINAPACAN","MAGSAYSAY","ROXAS","SAN VICENTE","TAYTAY"]},{id:2,name:"2nd",municipalities:["BALABAC","BATARAZA","BROOKE'S POINT","NARRA","QUEZON","RIZAL","SOFRONIO ESPAÃ‘OLA"]},{id:3,name:"3rd",municipalities:["ABORLAN","PUERTO PRINCESA CITY"]}],w=["PUNONG BARANGAY","BARANGAY KAGAWAD"],C=L(()=>{let r=[];return t.value.report_level==="district"||t.value.report_level==="province"?(r=s.province=="PALAWAN"?["MAYOR","VICE-MAYOR","COUNCILOR"]:[],w.filter(a=>!r.includes(a))):(r=["GOVERNOR","VICE-GOVERNOR","BOARD MEMBER"],t.value.municipalities=="PUERTO PRINCESA CITY"||t.value.municipalities.includes("PUERTO PRINCESA CITY")?w.filter(a=>!r.includes(a)):w)}),S=L(()=>{if(s.province=="PALAWAN"){const r=u.find(a=>a.id==t.value.district);return r?r.municipalities:[]}else return Array.isArray(s.municipality)?s.municipality.map(a=>a.municipality_name??a):[s.municipality]});function P(){t.value.municipalities=[],t.value.barangays=[],_.value=!1,O()}function F(){t.value.municipalities=[],t.value.barangays=[],t.value.positions=C.value,_.value=!1,O()}function V(){_.value?t.value.municipalities=S.value.flatMap(r=>r):t.value.municipalities=[]}function j(){h.value?t.value.barangays=m.barangay.flatMap(r=>r.barangay_name):t.value.barangays=[]}function K(){c.value?t.value.positions=C.value.flatMap(r=>r):t.value.positions=[]}function I(){_.value=!1,t.value.barangays=[],t.value.report_level=="barangay"&&m.getBarangay(t.value.municipalities)}function W(r){t.value.positions=t.value.positions.filter(a=>a!=r)}function G(r){t.value.report_level=="barangay"?t.value.municipalities=[]:t.value.municipalities=t.value.municipalities.filter(a=>a!=r)}function D(r){t.value.barangays=t.value.barangays.filter(a=>a!=r)}function R(r){let a=r.currentTarget;a&&a.matches(":focus")&&setTimeout(function(){a.blur()},0)}function H(){c.value=!1}function O(){s.has_limited_access&&(t.value.report_level!=="barangay"?(_.value=!0,V()):m.getBarangay(t.value.municipalities))}return M(()=>{t.value.positions=C.value.flatMap(r=>r),s.has_limited_access&&(t.value.report_level="municipality",O())}),(r,a)=>(i(),n("div",ae,[e("form",{onSubmit:a[12]||(a[12]=Q(()=>{},["prevent"]))},[le,e("div",ie,[e("div",ne,[e("label",oe,[g(e("input",{class:"my-auto radio radio-xs",type:"radio",name:"report_level",value:"municipality",ref:"municipalityRadioBtn","onUpdate:modelValue":a[0]||(a[0]=o=>t.value.report_level=o),onChange:P},null,544),[[N,t.value.report_level]]),re])]),e("div",ce,[e("label",de,[g(e("input",{class:"my-auto radio radio-xs",type:"radio",name:"report_level",value:"barangay","onUpdate:modelValue":a[1]||(a[1]=o=>t.value.report_level=o),onChange:P},null,544),[[N,t.value.report_level]]),ue])])]),pe,t.value.report_level!=="province"&&d(s).province=="PALAWAN"?(i(),n("div",me,[_e,e("ul",xe,[(i(),n(b,null,f(u,o=>e("li",null,[e("label",ve,[g(e("input",{class:"my-auto radio radio-xs",type:"radio",name:"district",value:o.id,"onUpdate:modelValue":a[2]||(a[2]=v=>t.value.district=v),onChange:P},null,40,ge),[[N,t.value.district]]),e("span",be,p(o.name),1)])])),64))])])):x("",!0),t.value.report_level!="district"&&t.value.report_level!="province"?(i(),n("div",ye,[he,d(s).has_limited_access&&d(s).municipality?(i(),n("div",fe,p(Array.isArray(d(s).municipality)?d(s).municipality[0]:d(s).municipality),1)):(i(),n("div",we,[e("label",{tabindex:"0",class:"btn bg-transparent btn-sm btn-block text-gray-500 m-1 hover:bg-transparent border-0 text-[10px]",onMousedown:R}," Click to select",32),e("ul",ke,[t.value.report_level=="municipality"?(i(),n("li",Ae,[e("label",Ce,[g(e("input",{type:"checkbox",class:"checkbox checkbox-sm",id:"all","onUpdate:modelValue":a[3]||(a[3]=o=>_.value=o),onChange:V},null,544),[[k,_.value]]),Re])])):x("",!0),(i(!0),n(b,null,f(d(S),o=>(i(),n("li",{key:o},[e("label",$e,[t.value.report_level=="municipality"?g((i(),n("input",{key:0,type:"checkbox",class:"checkbox checkbox-sm",id:o,value:o,onChange:I,"onUpdate:modelValue":a[4]||(a[4]=v=>t.value.municipalities=v)},null,40,Ne)),[[k,t.value.municipalities]]):x("",!0),t.value.report_level=="barangay"?g((i(),n("input",{key:1,type:"radio",class:"radio radio-xs",id:o,value:o,onChange:I,onClick:R,"onUpdate:modelValue":a[5]||(a[5]=v=>t.value.municipalities=v)},null,40,Be)),[[N,t.value.municipalities]]):x("",!0),e("span",Pe,p(o),1)])]))),128))])]))])):x("",!0),d(s).has_limited_access?x("",!0):(i(),n("div",Oe,[t.value.report_level=="municipality"?(i(),n("div",Le,[(i(!0),n(b,null,f(t.value.municipalities,o=>(i(),n("div",{class:"bg-gray-200 shadow text-gray-600 rounded font-semibold px-2 text-center align-middle py-1 cursor-pointer",onClick:v=>G(o)},[e("p",Me,p(o),1)],8,Ee))),256))])):x("",!0),t.value.report_level=="barangay"&&t.value.municipalities.length?(i(),n("div",{key:1,class:"bg-gray-200 shadow text-gray-600 rounded font-semibold px-2 text-center whitespace-nowrap align-middle py-1 text-[10px] cursor-pointer",onClick:a[6]||(a[6]=o=>G(r.city))},[e("span",null,p(t.value.municipalities),1)])):x("",!0)])),t.value.report_level=="barangay"?(i(),n("div",Ue,[Se,e("div",Ve,[e("label",{tabindex:"0",class:"btn bg-transparent btn-sm btn-block text-gray-500 m-1 hover:bg-transparent border-0 text-[10px]",onMousedown:R},"Click to select",32),e("ul",Ie,[e("li",null,[e("label",Ge,[g(e("input",{type:"checkbox",class:"checkbox checkbox-sm",id:"all","onUpdate:modelValue":a[7]||(a[7]=o=>h.value=o),onChange:j},null,544),[[k,h.value]]),Te])]),(i(!0),n(b,null,f(d(m).barangay,(o,v)=>(i(),n("li",{key:v},[e("label",Ye,[g(e("input",{type:"checkbox",class:"checkbox checkbox-sm",id:v,value:o.barangay_name,"onUpdate:modelValue":a[8]||(a[8]=$=>t.value.barangays=$)},null,8,ze),[[k,t.value.barangays]]),e("span",Fe,p(o.barangay_name),1)])]))),128))])])])):x("",!0),e("div",je,[e("div",Ke,[(i(!0),n(b,null,f(t.value.barangays,o=>(i(),n("div",{class:"bg-gray-200 shadow text-gray-600 rounded font-semibold px-2 text-center whitespace-nowrap align-middle py-1 cursor-pointer",onClick:v=>D(o)},[e("p",De,p(o),1)],8,We))),256))])]),t.value.report_level!="province"?(i(),n(b,{key:4},[e("div",He,[Ze,e("div",qe,[e("label",{tabindex:"0",class:"btn bg-transparent btn-sm btn-block text-gray-500 m-1 hover:bg-transparent border-0 text-[10px]",onMousedown:R},"Click to select",32),e("ul",Qe,[e("li",null,[e("label",Xe,[g(e("input",{type:"checkbox",class:"checkbox checkbox-sm",id:"all","onUpdate:modelValue":a[9]||(a[9]=o=>c.value=o),onChange:K},null,544),[[k,c.value]]),Je])]),(i(!0),n(b,null,f(d(C),(o,v)=>(i(),n("li",{key:v},[e("label",et,[g(e("input",{type:"checkbox",class:"checkbox checkbox-sm",id:o,value:o,onChange:H,"onUpdate:modelValue":a[10]||(a[10]=$=>t.value.positions=$)},null,40,tt),[[k,t.value.positions]]),e("span",st,p(o),1)])]))),128))])])]),e("div",at,[e("div",lt,[(i(!0),n(b,null,f(t.value.positions,(o,v)=>(i(),n("div",{class:"bg-gray-200 shadow text-gray-600 rounded font-semibold px-2 py-1 text-center align-middle cursor-pointer",key:o+v,onClick:$=>W(o)},[e("p",nt,p(o),1)],8,it))),128))])])],64)):x("",!0),e("div",ot,[e("button",{class:"btn mx-auto rounded w-[130px] shadow-lg",onClick:F}," Reset "),e("button",{class:T(["btn mx-auto btn-success text-white w-[130px] rounded shadow-lg",t.value.report_level=="municipality"&&!t.value.municipalities.length||t.value.report_level=="barangay"&&!t.value.barangays.length||!t.value.positions.length?"btn-disabled":""]),onClick:a[11]||(a[11]=o=>d(m).generateResult(t.value))}," Generate ",2)])],32)]))}},ct={class:"relative lg:block lg:space-y-10 p-2 md:grid md:grid-cols-12 lg:h-full"},dt={key:0},ut={__name:"NavBar",setup(l){const s=y(!1),m=1024,t=y(document.body.offsetWidth),_=y(t.value>m);return window.addEventListener("resize",function(){t.value=document.body.offsetWidth,_.value=t.value>m}),(h,c)=>{const u=Y("mdicon");return i(),n("div",ct,[_.value?x("",!0):(i(),n("div",dt,[!_.value&&!s.value?(i(),n("button",{key:0,class:"btn btn-success gap-2 text-white",onClick:c[0]||(c[0]=w=>s.value=!s.value)},[A(u,{name:"play-circle-outline"}),X(" Get Started ")])):(i(),n("button",{key:1,class:"btn btn-ghost absolute right-4 z-50 text-red-600",onClick:c[1]||(c[1]=w=>s.value=!s.value)},[A(u,{name:"close",size:"22"})]))])),_.value||s.value?(i(),z(rt,{key:1})):x("",!0)])}}},pt={class:"flex flex-col md:flex-row gap-10 justify-between items-center"},mt={class:"font-bold md:font-extrabold text-xl md:text-3xl text-gray-700 drop-shadow"},_t={class:"font-semibold text-center md:text-left text-xl md:text-3xl uppercase text-gray-600 whitespace-normal md:whitespace-nowrap"},xt={key:0,class:"py-0 font-semibold text-gray-600 text-xl md:text-xl lg:text-2xl whitespace-normal md:whitespace-nowrap"},vt={key:0},gt={key:1},bt=e("p",{class:"mx-auto w-48 px-1 md:mx-0 mt-1"},[e("iframe",{src:"https://free.timeanddate.com/clock/i8sjc6kt/n4159/tlph/fc555/tct/pct/ahl/tt0/tw0/td2/ta1/tb2",frameborder:"0",width:"225",height:"19",allowtransparency:"true"})],-1),yt={class:"flex justify-between gap-2 items-center"},ht={class:"flex justify-center items-center"},ft=e("span",{class:"font-bold drop-shadow-lg"},"Logout",-1),wt={__name:"HelloBar",setup(l){const s=E();return(m,t)=>{const _=Y("mdicon");return i(),n("div",pt,[e("div",null,[e("h1",mt,p(d(s).election_year)+" Barangay and Sangguniang Kabataan Elections ",1),e("h2",_t," Province of "+p(d(s).province),1),Array.isArray(d(s).municipality)?x("",!0):(i(),n("h3",xt,[d(s).municipality&&!/CITY/i.test(d(s).municipality)?(i(),n("div",vt," Municipality of "+p(d(s).municipality),1)):(i(),n("div",gt,p(d(s).municipality),1))])),bt]),e("div",yt,[e("div",ht,[e("button",{onClick:t[0]||(t[0]=(...h)=>d(s).logout&&d(s).logout(...h)),class:"text-sm px-2 text-red-500 underline rounded-full flex gap-1 drop-shadow-lg md:-mt-24 -mt-6"},[A(_,{name:"logout-variant",width:"15px"}),ft])])])])}}};const kt={class:"flex flex-col gap-6 p-2 md:p-7 relative"},At=e("div",{class:"absolute bg-gradient-to-b from-gray-200 to-stone-100 opacity-75 inset-0 z-0 no-print"},null,-1),Ct=e("div",{class:"absolute inset-0 bg-[url(assets/img/grid.svg)] bg-center z-0 no-print"},null,-1),Rt={class:"z-20 text-gray-500"},$t=ee('<div class="printHeader hidden mt-8"><div class="text-center"><span class="font-semibold text-2xl uppercase">2023 Barangay and Sangguniang Kabataan Election Results</span></div><div class="px-4 py-2 mx-auto"><table class="headerTable"><tr></tr></table></div><hr></div>',1),Nt={class:"table table-compact w-full"},Bt={class:"no-print"},Pt={colspan:"9"},Ot={class:"flex gap-3"},Lt={class:"form-control mt-2"},Et={class:"label cursor-pointer"},Mt=e("span",{class:"label-text font-semibold text-gray-500"},"Proclaimed",-1),Ut=e("thead",null,[e("tr",null,[e("th",{class:"text-xs"},"#"),e("th",null,"Municipality"),e("th",null,"Barangay"),e("th",null,"Position"),e("th",null,"Name"),e("th",null,"Nickname"),e("th",null,"Votes"),e("th",null,"Rank"),e("th",null,"Proclaimed")])],-1),St={key:0},Vt={class:"text-xs text-gray-400"},It={class:"text-xs"},Gt={class:"whitespace-normal max-w-[11rem] text-xs"},Tt={class:"text-xs"},Yt={class:"max-w-[13rem] whitespace-normal text-xs"},zt={class:"max-w-[8px] text-xs"},Ft={class:"text-xs"},jt={class:"text-xs"},Kt={class:"text-xs"},Wt={__name:"Content",setup(l){const s=U();M(()=>{s.getResult()});const m=y(""),t=y(!1);new Date().toLocaleDateString("en-PH");const _=L(()=>{if(s.result)return s.result.filter(c=>t.value&&c.candidate_position=="PUNONG BARANGAY"?c.candidate_rank==1:t.value&&c.candidate_position=="BARANGAY KAGAWAD"?c.candidate_rank<=7:c).filter(c=>c.candidate_name.includes(m.value.toUpperCase())||c.candidate_nickname&&c.candidate_nickname.includes(m.value.toUpperCase()))});return(h,c)=>(i(),n("div",kt,[At,Ct,A(wt,{class:"z-20 no-print"}),e("div",Rt,[$t,e("table",Nt,[e("thead",Bt,[e("tr",null,[e("td",Pt,[e("div",Ot,[g(e("input",{class:"input w-full max-w-xs font-normal uppercase rounded outline-none",type:"text","onUpdate:modelValue":c[0]||(c[0]=u=>m.value=u),placeholder:"Search for name or nickname"},null,512),[[J,m.value]]),e("div",Lt,[e("label",Et,[Mt,g(e("input",{"onUpdate:modelValue":c[1]||(c[1]=u=>t.value=u),type:"checkbox",class:"checkbox checkbox-sm ml-2"},null,512),[[k,t.value]])])])])])])]),Ut,d(s).result?(i(),n("tbody",St,[(i(!0),n(b,null,f(d(_),(u,w)=>(i(),n("tr",{class:T(u.candidate_position=="PUNONG BARANGAY"&&u.candidate_rank==1||u.candidate_position=="BARANGAY KAGAWAD"&&u.candidate_rank<=7?"font-semibold":"")},[e("td",Vt,p(w+1),1),e("td",It,p(u.municipality_name),1),e("td",Gt,p(u.barangay_name),1),e("td",Tt,p(u.candidate_position),1),e("td",Yt,p(u.candidate_name),1),e("td",zt,p(u.candidate_nickname),1),e("td",Ft,p(u.total_votes),1),e("td",jt,p(u.candidate_rank),1),e("td",Kt,p(u.proclamation_date?d(se)(u.proclamation_date).format("L"):""),1)],2))),256))])):x("",!0)])])]))}},Dt={class:"grid grid-cols-12 h-screen"},Ht={class:"col-span-12 bg-stone-50 flex flex-col lg:flex-row md:divide-x-2"},Zt={class:"lg:max-w-[350px] w-full lg:h-full relative lg:fixed overflow-y-scroll lg:z-40 no-print"},Xt={__name:"Container",setup(l){const s=E(),m=U();return M(async()=>{await m.getResult()}),(t,_)=>(i(),n(b,null,[d(s).is_loading?(i(),z(te,{isFullScreen:!0,key:"loader"})):x("",!0),e("div",Dt,[e("div",Ht,[e("div",Zt,[A(ut)]),A(Wt,{class:"flex-1 lg:ml-[350px] print-div"})])])],64))}};export{Xt as default};
