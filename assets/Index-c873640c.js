import{d as V,e as _,l as U,r as A,o as i,c as n,a as t,u as l,b as m,F as x,g as f,w as b,j as y,v as H,n as k,t as a,h as N,f as P}from"./index-ee6d6c60.js";import{h as v}from"./moment-fbc5633a.js";const T={class:"flex h-screen bg-slate-700"},B={class:"mx-auto mt-12"},M={key:0,class:"flex bg-white p-2 px-8 rounded"},I={key:1,class:"table text-[0.8rem]"},z={colspan:"9"},D=t("span",{class:"font-bold drop-shadow-lg"},"Log out",-1),F=t("tr",{class:"rounded-t"},[t("th",null,"#"),t("th",null,"Province"),t("th",null,"City/Municipality"),t("th",null,"Has Access"),t("th",null,"Visit Count"),t("th",null,"Last Visited"),t("th")],-1),G={class:"text-gray-500"},S={class:"flex gap-2"},$=["onClick"],j=["onClick"],q=t("input",{type:"checkbox",id:"update-modal",class:"modal-toggle"},null,-1),E={class:"modal"},R={class:"modal-box relative w-[350px]"},Y=t("label",{for:"update-modal",class:"btn btn-sm btn-circle absolute right-3 top-2"},"✕",-1),J={class:"w-full max-w-lg mt-4"},K={class:"flex flex-wrap -mx-3 mb-2"},O={class:"w-full px-3"},Q=t("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-semibold mb-2",for:"province"}," Province ",-1),W={class:"flex flex-wrap -mx-3 mb-2"},X={class:"w-full px-3"},Z=t("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-semibold mb-2",for:"city"}," City/Municipality ",-1),tt={class:"form-control w-28"},st={class:"label cursor-pointer"},et=t("span",{class:"block uppercase tracking-wide text-gray-700 text-xs font-semibold mb-2"},"Has Access",-1),ot=["checked"],lt={class:"modal-action"},at=t("input",{type:"checkbox",id:"history-modal",class:"modal-toggle"},null,-1),it={class:"modal"},nt={class:"modal-box relative w-[350px]"},ct=t("label",{for:"history-modal",class:"btn btn-sm btn-circle absolute right-3 top-2"},"✕",-1),dt={class:"w-full max-w-lg mt-4"},rt={class:"flex flex-wrap -mx-3"},ut={class:"w-full px-3"},_t={class:"block uppercase tracking-wide text-gray-700 text-sm font-semibold mb-2",for:"province"},pt={key:0},ht={class:"flex flex-wrap -mx-3 mb-2"},mt={class:"w-full px-3"},xt={key:0},bt={class:"flex gap-2"},vt={class:"flex gap-2"},gt=t("p",{class:"font-light"},"Visited:",-1),ft={class:"text-gray-500"},yt=t("div",null,"-",-1),kt={class:"flex gap-2"},wt=t("p",{class:"font-light"},"Generated:",-1),Ct={class:"text-gray-500"},Lt={class:"table text-[0.7rem] table-compact"},Vt=t("thead",null,[t("th",{class:"text-gray-500 text-[12px]"},"#"),t("th",{class:"text-gray-500 w-full text-[12px] font-semibold"}," Generated At ")],-1),Ut={class:"text-gray-500 font-mono font-light"},At={class:"py-2 font-mono"},Ht={key:1},Nt={key:2},Mt={__name:"Index",setup(Pt){const e=V(),o=_({access_code:null,province:null,municipality:null,has_access:null});_([]);const u=_("Update"),p=_(!1);function g(d){o.value.access_code=d.access_code,o.value.province=d.province,o.value.municipality=d.municipality,o.value.has_access=parseInt(d.is_accessible),e.showAccessHistory(d.id)}function w(){e.updateAccessCode(o.value),e.loading&&(u.value="Updating",p.value=!0),setTimeout(()=>{e.loading||(u.value="Updated")},1e3),setTimeout(()=>{p.value=!1,u.value="Update"},2500)}function C(){e.getAccessCodes()}return U(()=>{C()}),(d,c)=>{const h=A("mdicon");return i(),n(x,null,[t("div",T,[t("div",B,[l(e).access_codes?(i(),n("table",I,[t("thead",null,[t("tr",null,[t("th",z,[t("button",{onClick:c[0]||(c[0]=(...s)=>l(e).logout&&l(e).logout(...s)),class:"text-sm text-red-500 underline rounded-full flex gap-1 drop-shadow-lg mx-auto"},[m(h,{name:"logout-variant",width:"15px"}),D])])]),F]),t("tbody",null,[(i(!0),n(x,null,f(l(e).access_codes,(s,r)=>(i(),n("tr",{key:r},[t("td",G,a(r+1),1),t("td",null,a(s.province),1),t("td",null,a(s.municipality),1),t("td",{class:k(parseInt(s.is_accessible)?"text-green-500":"text-red-500")},a(parseInt(s.is_accessible)?"Yes":"No"),3),t("td",null,a(s.visit_count),1),t("td",null,a(l(v)(s.last_visited).isValid()?l(v)(s.last_visited).format("L LT"):""),1),t("td",null,[t("div",S,[t("label",{class:"cursor-pointer",for:"update-modal",onClick:L=>g(s)},[m(h,{name:"square-edit-outline",size:"24",class:"text-orange-500"})],8,$),t("label",{class:"cursor-pointer",for:"history-modal",onClick:L=>g(s)},[m(h,{name:"history",size:"24",class:"text-yellow-500"})],8,j)])])]))),128))])])):(i(),n("div",M," Loading Data. Please wait.. "))])]),q,t("div",E,[t("div",R,[Y,t("form",J,[t("div",K,[t("div",O,[Q,b(t("input",{class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"province",type:"text",disabled:"","onUpdate:modelValue":c[1]||(c[1]=s=>o.value.province=s)},null,512),[[y,o.value.province]])])]),t("div",W,[t("div",X,[Z,b(t("input",{class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"province",type:"text",disabled:"","onUpdate:modelValue":c[2]||(c[2]=s=>o.value.municipality=s)},null,512),[[y,o.value.municipality]])])]),t("div",tt,[t("label",st,[et,b(t("input",{type:"checkbox",checked:o.value.has_access,class:"checkbox -mt-2","onUpdate:modelValue":c[3]||(c[3]=s=>o.value.has_access=s)},null,8,ot),[[H,o.value.has_access]])])])]),t("div",lt,[t("button",{class:k(["btn transition-all",{"loading btn-disable btn-success text-white":p.value}]),onClick:w},a(u.value),3)])])]),at,t("div",it,[t("div",nt,[ct,t("form",dt,[t("div",rt,[t("div",ut,[t("label",_t,[N(a(o.value.province)+" ",1),o.value.municipality?(i(),n("span",pt," / "+a(o.value.municipality),1)):P("",!0)])])]),t("div",ht,[t("div",mt,[!l(e).loading&&l(e).accessHistory?(i(),n("div",xt,[t("div",bt,[t("div",vt,[gt,t("span",ft,a(l(e).visit_count),1)]),yt,t("div",kt,[wt,t("span",Ct,a(l(e).accessHistory.length),1)])]),t("table",Lt,[Vt,t("tbody",null,[(i(!0),n(x,null,f(l(e).accessHistory,(s,r)=>(i(),n("tr",{key:r},[t("td",Ut,a(r+1)+". ",1),t("td",At,a(l(v)(s.access_at).format("L LT")),1)]))),128))])])])):l(e).loading?(i(),n("div",Nt,"Loading data. Please wait..")):(i(),n("div",Ht," No data available "))])])])])])],64)}}};export{Mt as default};
